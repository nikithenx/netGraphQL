@page "/"

@inject INetGraphQLClient _client

@if (_isLoading)
{
    <Loading />
}
else 
{
    @if (_authors is not null)
    {
        <MudGrid class="py-4">
            @foreach (var item in _authors)
            {
                <MudItem xs="12" sm="6" md="4">
                    <AuthorCard Author="@item" />
                </MudItem>
            }
        </MudGrid>
    }
    else 
    {
        <Error />
    }
}

@code {

    private IReadOnlyList<IGetAuthors_Authors> _authors;
    private bool _isLoading = true;

    protected override async Task OnInitializedAsync()
    {
        var result = await _client.GetAuthors.ExecuteAsync();
        _authors = result?.Data?.Authors;

        _isLoading = false;
    }
}